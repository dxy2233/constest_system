(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3bba"],{"9Zt7":function(e,t,i){"use strict";i.r(t);var n=i("bS4n"),c=i.n(n),s=i("hZMg"),a=i("hrJr"),o=i("8t5x"),l={name:"Purview",data:function(){return{roleList:[],activeRole:"",activeIndex:"",rolePurviewList:[],checkList:[]}},computed:c()({},Object(o.b)(["buttons"])),watch:{activeIndex:function(e,t){if(null!==this.roleList[e].ruleList){var i=this.roleList[e].ruleList;this.checkList=JSON.parse(i)}else this.checkList=[]}},created:function(){this.init()},methods:{init:function(){var e=this;Object(s.f)().then(function(t){e.roleList=t.content,e.activeRole=e.roleList[0].id,e.activeIndex=0,Object(s.g)(e.roleList[0].id).then(function(t){e.rolePurviewList=t.content})})},changeCheckValue:function(e,t){var i=this;if(!e){var n=[];this.rolePurviewList.forEach(function(e,i,c){e.id===t&&e.child.forEach(function(e,t,i){n.push(e.id)})}),n.forEach(function(e,t,n){for(var c=0;c<i.checkList.length;c++)i.checkList[c]===e&&i.checkList.splice(c,1)})}},saveRolePurview:function(){Object(s.k)(this.activeRole,this.checkList).then(function(e){Object(a.Message)({message:e.msg,type:"success"})})},addRole:function(){var e=this;this.$prompt("角色名称","新建角色",{confirmButtonText:"保存",cancelButtonText:"取消",inputPlaceholder:"最长8个中文字符",inputPattern:/^[\u4e00-\u9fa5]{1,8}$/,inputErrorMessage:"最长8个中文字符"}).then(function(t){var i=t.value;Object(s.j)(i).then(function(t){Object(a.Message)({message:t.msg,type:"success"}),e.init()})})},rename:function(){var e=this;this.$prompt("","重命名",{confirmButtonText:"保存",cancelButtonText:"取消",inputValue:this.roleList[this.activeIndex].name,inputPlaceholder:"最长8个中文字符",inputPattern:/^[\u4e00-\u9fa5]{1,8}$/,inputErrorMessage:"最长8个中文字符"}).then(function(t){var i=t.value;Object(s.l)(e.activeRole,i).then(function(t){Object(a.Message)({message:t.msg,type:"success"}),Object(s.f)().then(function(t){e.roleList=t.content})})})},deleteRole:function(){var e=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.b)(e.activeRole).then(function(t){Object(a.Message)({message:t.msg,type:"success"}),e.init()})})}}},r=(i("s6/9"),i("ZrdR")),u=Object(r.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("h4",{staticStyle:{display:"inline-block"}},[e._v("权限管理")]),e._v(" "),i("el-button",{staticClass:"btn-right",on:{click:e.addRole}},[e._v("新建角色")]),e._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"menus"},e._l(e.roleList,function(t,n){return i("el-button",{key:n,class:{active:n==e.activeIndex},on:{click:function(i){e.activeRole=t.id,e.activeIndex=n}}},[e._v(e._s(t.name))])})),e._v(" "),i("div",{staticClass:"info"},[i("h4",{staticStyle:{display:"inline-block","margin-right":"20px"}},[e._v("管理员设置")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"!=e.activeRole&&"2"!=e.activeRole,expression:"activeRole!='1' && activeRole!='2'"}],attrs:{size:"small"},on:{click:e.rename}},[e._v("重命名")]),e._v(" "),i("el-button",{staticStyle:{float:"right","margin-top":"10px"},attrs:{size:"small"},on:{click:e.saveRolePurview}},[e._v("保存")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"!=e.activeRole&&"2"!=e.activeRole,expression:"activeRole!='1' && activeRole!='2'"}],staticStyle:{float:"right","margin-top":"10px"},attrs:{type:"danger",size:"small"},on:{click:e.deleteRole}},[e._v("删除角色")]),e._v(" "),i("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.rolePurviewList,function(t,n){return i("div",{key:n,staticClass:"checkbox"},[i("div",{staticClass:"title"},[i("el-checkbox",{attrs:{label:t.id},on:{change:function(i){e.changeCheckValue(i,t.id)}}},[e._v(e._s(t.name))])],1),e._v(" "),i("div",{staticClass:"detail"},e._l(t.child,function(n,c){return i("el-checkbox",{key:c,attrs:{label:n.id,disabled:-1==e.checkList.indexOf(t.id)}},[e._v(e._s(n.name))])}))])}))],1)])],1)},[],!1,null,"29d2ed2a",null);u.options.__file="index.vue";t.default=u.exports},"s6/9":function(e,t,i){"use strict";var n=i("tssr");i.n(n).a},tssr:function(e,t,i){}}]);