(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-53dc"],{KVMX:function(t,e,a){"use strict";a.r(e);var n=a("8i2m"),i=a.n(n),l=a("+xxO"),o=a("t3Un");var c={name:"Admin",data:function(){var t=this;return{info1:[{title:"今日登陆人数",num:null},{title:"今日新增用户数",num:null},{title:"今日登投票量",num:null},{title:"今日实名认证人数",num:null},{title:"今日新增节点数",num:null}],info2:[{title:"用户总数",num:null},{title:"7日内重复登陆人数",num:null},{title:"合计投票量",num:null},{title:"实名认证总数",num:null},{title:"节点总数",num:null}],menus:[{title:"登录人数"},{title:"新增用户数"},{title:"新增投票量"},{title:"新增实名认证人数"},{title:"新增节点数量"}],activeName:"0",date:[],datePickerOptions:{shortcuts:[{text:"最近7天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近15天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-1296e6),t.$emit("pick",[a,e])}},{text:"最近30天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}}]},dateType:"按日",mapData:[],mapOptions:[{value:1,label:"注册用户"},{value:2,label:"实名认证用户"},{value:3,label:"实名非节点用户"},{value:4,label:"节点用户"}],mapType:1,styleRow:function(e){if(e.row.name===t.provinceName)return{background:"#ebeef5"}},cityDate:[],provinceName:""}},created:function(){var t=this;Object(o.a)({url:"/statistics/index",method:"post"}).then(function(e){t.info1[0].num=e.content.userLoginNum,t.info1[1].num=e.content.userCreateNum,t.info1[2].num=e.content.voteNum,t.info1[3].num=e.content.identifyNum,t.info1[4].num=e.content.nodeNum,t.info2[0].num=e.content.userAllNum,t.info2[1].num=e.content.repeatLoginNum,t.info2[2].num=e.content.voteAllNum,t.info2[3].num=e.content.identifyAllNum,t.info2[4].num=e.content.nodeAllNum});var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),this.date[0]=a.toLocaleDateString().replace(/\//g,"-"),this.date[1]=e.toLocaleDateString().replace(/\//g,"-"),this.handleClick({name:0,label:"登录人数"})},mounted:function(){this.changeMapData()},methods:{handleClick:function(t){var e=this,a=null;switch(this.dateType){case"按日":a=1;break;case"按周":a=2;break;case"按月":a=3}(function(t,e,a,n){return Object(o.a)({url:"/statistics/get-statistics-data",method:"post",data:{type:t,group:e,str_time:a,end_time:n}})})(parseInt(this.activeName)+1,a,this.date[0],this.date[1]).then(function(a){var n="main"+t.name;e.$nextTick(function(){i.a.init(document.getElementById(n)).setOption({title:{text:t.label,x:"center",y:"bottom"},xAxis:{type:"category",data:a.content.date},yAxis:{type:"value"},series:[{data:a.content.data,type:"line",label:{normal:{show:!0,position:"top",color:"#888"}}}],color:["#409EFF"]})})})},changeDate:function(t){this.handleClick({name:this.activeName,label:this.menus[this.activeName].title})},changeMapData:function(){var t=this;(function(t){return Object(o.a)({url:"/statistics/get-address-data",method:"post",data:{type:t}})})(this.mapType).then(function(e){t.mapData=e.content,t.initMap()})},initMap:function(){var t=this;l.d("../../static/china.geojson").then(function(e){e.features.forEach(function(e,a,n){for(var i=0;i<t.mapData.data.length;i++)e.properties.name===t.mapData.data[i].name&&(e.properties.count=t.mapData.data[i].count,e.properties.proportion=t.mapData.data[i].count/t.mapData.allPeople)});var a=l.b().scale(350).center([140,25]),n=l.c().projection(a),i=l.e("#map"),o=l.e(".app-container").append("div").attr("class","tooltip").style("display","none");i.selectAll("*").remove(),i.selectAll("path").data(e.features).enter().append("path").attr("stroke","#fff").attr("stroke-width",1).attr("fill",function(t,e){var a=t.properties.proportion;switch(!0){case a>0||a<=3:return"#9ac9ff";case a>3||a<=6:return"#7ab9ff";case a>6||a<=15:return"#46a1ff";case a>15:return"#1086ff";default:return"#ebf3fc"}}).attr("d",n).on("mouseover",function(t,e){l.e(this).attr("fill","yellow");var a=0;t.properties.count&&(a=t.properties.count),o.html(t.properties.name+"："+a).style("left",l.a.pageX-250+"px").style("top",l.a.pageY-100+"px").style("display","block")}).on("mouseout",function(t,e){l.e(this).attr("fill",function(t,e){var a=t.properties.proportion;switch(!0){case a>0||a<=3:return"#9ac9ff";case a>3||a<=6:return"#7ab9ff";case a>6||a<=15:return"#46a1ff";case a>15:return"#1086ff";default:return"#ebf3fc"}}),o.style("display","none")})})},clickRow:function(t){this.cityDate=t.child,this.provinceName=t.name}}},r=(a("b3z4"),a("ZrdR")),s=Object(r.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"infoRow"},t._l(t.info1,function(e,n){return a("div",{key:n},[a("p",[t._v(t._s(e.title))]),t._v(" "),a("p",[t._v(t._s(e.num))])])})),t._v(" "),a("div",{staticClass:"infoRow"},t._l(t.info2,function(e,n){return a("div",{key:n},[a("p",[t._v(t._s(e.title))]),t._v(" "),a("p",[t._v(t._s(e.num))])])})),t._v(" "),a("el-tabs",{staticStyle:{"margin-top":"40px"},attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.menus,function(e,n){return a("el-tab-pane",{key:n,attrs:{label:e.title,name:n.toString()}},[a("el-date-picker",{staticStyle:{width:"450px"},attrs:{"picker-options":t.datePickerOptions,clearable:!1,type:"daterange",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.changeDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),a("el-radio-group",{staticStyle:{float:"right"},on:{change:t.changeDate},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}},[a("el-radio-button",{attrs:{label:"按日"}}),t._v(" "),a("el-radio-button",{attrs:{label:"按周"}}),t._v(" "),a("el-radio-button",{attrs:{label:"按月"}})],1),t._v(" "),a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"main"+n}})],1)})),t._v(" "),a("h4",{staticStyle:{"margin-top":"100px"}},[t._v("用户地域分布图")]),t._v(" "),a("el-select",{staticStyle:{display:"block",width:"200px"},on:{change:t.changeMapData},model:{value:t.mapType,callback:function(e){t.mapType=e},expression:"mapType"}},t._l(t.mapOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("div",{staticClass:"map-box"},[a("svg",{attrs:{id:"map",width:"500",height:"331"}}),t._v(" "),a("el-table",{attrs:{data:t.mapData.data,"row-style":t.styleRow},on:{"row-click":t.clickRow}},[a("el-table-column",{attrs:{prop:"name",label:"身份"}}),t._v(" "),a("el-table-column",{attrs:{prop:"count",label:"用户数"}})],1),t._v(" "),a("el-table",{staticStyle:{border:"1px solid #ddd","margin-left":"30px"},attrs:{data:t.cityDate}},[a("el-table-column",{attrs:{prop:"name",label:"城市",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"count",label:"用户数",align:"center"}})],1)],1)],1)},[],!1,null,"69f791c2",null);s.options.__file="index.vue";e.default=s.exports},b3z4:function(t,e,a){"use strict";var n=a("seCb");a.n(n).a},seCb:function(t,e,a){}}]);